<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://imsardine.github.io/dev-notes/dart/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>Dart - 建造以學習 | 在電梯裡遇見雙胞胎</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.min.css">
    <link href="../cinder_extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">建造以學習 | 在電梯裡遇見雙胞胎</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/imsardine/dev-notes/blob/source/docs/dart.md">Edit on imsardine/dev-notes</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#dart">Dart</a></li>
            <li class="second-level"><a href="#powered-by">應用實例</a></li>
                
            <li class="second-level"><a href="#getting-started">新手上路 ??</a></li>
                
            <li class="second-level"><a href="#language">Language ??</a></li>
                
            <li class="second-level"><a href="#core-library">Core Library ??</a></li>
                
            <li class="second-level"><a href="#installation">安裝設定</a></li>
                
                <li class="third-level"><a href="#mac">Mac</a></li>
                <li class="third-level"><a href="#linux">Linux</a></li>
                <li class="third-level"><a href="#docker">Docker</a></li>
            <li class="second-level"><a href="#reference">參考資料</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="dart">Dart<a class="headerlink" href="#dart" title="Permanent link"> #</a></h1>
<ul>
<li>
<p><a href="https://www.dartlang.org/">Dart programming language | Dart</a></p>
<p>Dart helps you craft beautiful, high-quality experiences ACROSS ALL SCREENS, with: 至少跨及 web 與 mobile</p>
<ul>
<li>
<p>A client-optimized language &ndash; Dart started out being optimized for web apps, and is evolving to provide great support for mobile apps. Dart also runs on the command line and server-side.</p>
<p>為什麼 client-optimized 會是一項優勢? 但或許這也是為何 Dart 能從 web 一路發展到 mobile 的原因，也支援 ARM CPU。</p>
</li>
<li>
<p>Rich, powerful FRAMEWORKS &ndash; For mobile apps, we recommend Flutter. For desktop apps, AngularDart.</p>
<p>對 Dart 而言，web、mobile 等不同的 platform，只是不同的 framework。其中 AngularDart 是個 web app framework 而非 desktop?</p>
</li>
<li>
<p>Delightful, flexible tooling &ndash; These range from general-purpose tools to FRAMEWORK-SPECIFIC ones like the <code>flutter</code> tool.</p>
</li>
</ul>
<p>Why Dart?</p>
<ul>
<li>Developers at Google and elsewhere use Dart to create high-quality, mission-critical apps for iOS, Android, and the web. With features aimed at CLIENT-SIDE DEVELOPMENT, Dart is a great fit for both mobile and web apps.</li>
<li>Productive - Dart’s syntax is clear and concise, its tooling simple yet powerful. SOUND TYPING?? helps you to identify subtle errors early. Dart has battle-hardened CORE LIBRARIES and an ecosystem of thousands of packages.</li>
<li>Fast - Dart provides optimizing AHEAD-OF-TIME COMPILATION to get predictably high performance and fast startup across mobile devices and the web.</li>
<li>
<p>Portable &ndash; Dart compiles to ARM and x86 code, so that Dart mobile apps can run NATIVELY ON IOS, ANDROID, and beyond. For web apps, Dart transpiles to JavaScript.</p>
<p>就 iOS/Android 而言，並非轉譯成其他語言再編譯，而是直接編譯成 native code，但為何 Flutter 有 Dart VM Observatory 可以用??</p>
</li>
<li>
<p>Approachable - Dart is familiar to many existing developers, thanks to its unsurprising object orientation and syntax. If you already know C++, C#, or Java, you can be productive with Dart in just a few days.</p>
</li>
<li>Reactive?? &ndash; Dart is well-suited to <a href="https://en.wikipedia.org/wiki/Reactive_programming">REACTIVE PROGRAMMING</a>, with support for managing short-lived objects—such as UI widgets—through Dart’s fast object allocation and generational garbage collector. Dart supports asynchronous programming through language features and APIs that use <code>Future</code> and <code>Stream</code> objects.</li>
</ul>
</li>
<li>
<p><a href="https://www.dartlang.org/guides/platforms">Platforms | Dart</a></p>
<ul>
<li>
<p>Dart is a SCALABLE language that you can use to write simple scripts or full featured apps. Whether you’re creating a mobile app, web app, command-line script, or server-side app, there’s a Dart solution for that.</p>
<p>分為 Flutter、Web 跟 Server，其中 Flutter 跟 Web 都有獨立的網站，只有 Server 則在 <a href="http://www.dartlang.org">www.dartlang.org</a> 站內；Web 的全名是 Dart for the web，而 Server 的全名則是 Server-side Dart。</p>
</li>
</ul>
</li>
<li>
<p><a href="https://medium.com/dartlang/announcing-dart-2-80ba01f43b6">Announcing Dart 2: Optimized for Client-Side Development</a> (2018-02-23) #ril</p>
</li>
<li><a href="https://hackernoon.com/why-flutter-uses-dart-dd635a054ebf">Why Flutter Uses Dart – Hacker Noon</a> (2018-02-26) #ril</li>
</ul>
<h2 id="powered-by">應用實例<a class="headerlink" href="#powered-by" title="Permanent link"> #</a></h2>
<ul>
<li><a href="../flutter/">Flutter</a></li>
<li><a href="https://www.dartlang.org/community/who-uses-dart">Who Uses Dart | Dart</a></li>
</ul>
<h2 id="getting-started">新手上路 ??<a class="headerlink" href="#getting-started" title="Permanent link"> #</a></h2>
<ul>
<li>
<p><a href="https://www.dartlang.org/guides/get-started">Get Started | Dart</a></p>
<pre><code>void main() {
  for (int i = 0; i &lt; 5; i++) {
    print('hello ${i + 1}');
  }
}
</code></pre>
<p>會依序印出 <code>hello 1</code> ~ <code>hello 5</code>，這正是 DartPad 下 Hello World 的範例。</p>
<ul>
<li>DartPad is a quick and easy way to become familiar with Dart language features.</li>
<li>Note that DartPad supports only a few core libraries. If you want to use other libraries, such as <code>dart:io</code> or libraries from packages, you’ll need to download platform-specific tools.</li>
<li>Learn about the Dart language and core libraries on this site. Once you have a use case in mind, go to the “get started” instructions for the appropriate Dart platform: 先弄懂 Dart 的基礎 (lang + core lib) 再往不同的 platform 移動。</li>
</ul>
</li>
<li>
<p><a href="https://www.dartlang.org/tools/dartpad">DartPad | Dart</a></p>
<ul>
<li>
<p>DartPad supports <code>dart:*</code> libraries that work with WEB APPS; it doesn’t support <code>dart:io</code> or libraries from packages. If you want to use <code>dart:io</code>, use the Dart SDK instead. If you want to use a package, get the SDK for a platform that THE PACKAGE SUPPORTS.</p>
<p>難怪 <a href="https://pub.dartlang.org/">Dart Packages</a> 套件會標示 <code>FLUTTER</code>、<code>WEB</code>、<code>OTHER</code> 等。</p>
</li>
<li>
<p>The language features and APIs that DartPad supports depend on the Dart SDK version that DartPad is based on. You can find the SDK version at the bottom right of DartPad.</p>
<p>這裡的 Dark SDK 指的正是 Dart for the web。</p>
</li>
</ul>
<p>Open DartPad, and run some samples</p>
<ul>
<li>A sample appears on the left and the output appears on the right. 右上角 Samples 下拉提供的範例並不多。</li>
<li>Choose an HTML sample like Sunflower, using the Samples list at the upper right. Again, the output appears to the right. By default, you see the HTML output—what you’d see in a browser.</li>
<li>Click CONSOLE to view the sample’s console output. On the left, click the HTML tab to view the sample’s HTML markup.</li>
</ul>
<p>Create a command-line app</p>
<ul>
<li>Click the New Pad button, and confirm that you want to discard changes to the current pad.</li>
<li>
<p>Clear the SHOW WEB CONTENT checkbox, at the bottom right of DartPad. The HTML and CSS tabs disappear.</p>
<p>原來不顯示 web content 就是 command-line app，不過 console 在 web app 下也會有。</p>
</li>
<li>
<p>Change the code. For example, change the <code>main()</code> function to contain this code:</p>
<pre><code>for (var char in 'hello'.split('')) {
  print(char);
}
</code></pre>
</li>
<li>
<p>Click the Format button. DartPad uses the Dart formatter to ensure that your code has proper indentation, white space, and line wrapping.</p>
</li>
<li>
<p>If you didn’t happen to have any bugs while you were entering the code, try INTRODUCING A BUG.</p>
<p>For example, if you change <code>split</code> to <code>spit</code>, you get warnings at the bottom of the window and in the Run button. If you run the app, you’ll see output from an UNCAUGHT EXCEPTION.</p>
<pre><code>Error compiling to JavaScript: &lt;-- 印證了 SDK 是 Dart for the web 的說法
main.dart:2:28:
Error: The method 'spit' isn't defined for the class 'dart.core::String'.
  for (var char in 'hello'.spit('')) {
                           ^^^^
Error: Compilation failed.
</code></pre>
</li>
</ul>
</li>
<li>
<p><a href="https://www.dartlang.org/samples">Sample Code | Dart</a> #ril</p>
</li>
</ul>
<h2 id="language">Language ??<a class="headerlink" href="#language" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://www.dartlang.org/guides/language/language-tour">Language Tour | Dart</a> #ril</li>
<li><a href="https://www.dartlang.org/guides/language">Dart Language | Dart</a> #ril</li>
<li><a href="https://www.dartlang.org/guides/language/sound-dart">Dart&rsquo;s Type System | Dart</a> #ril</li>
<li><a href="https://www.dartlang.org/guides/language/effective-dart">Effective Dart | Dart</a> #ril</li>
<li><a href="https://www.dartlang.org/guides/language/spec">Dart Language Specification | Dart</a> #ril</li>
</ul>
<h2 id="core-library">Core Library ??<a class="headerlink" href="#core-library" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://www.dartlang.org/guides/libraries/library-tour">Library Tour | Dart</a> #ril</li>
</ul>
<h2 id="installation">安裝設定<a class="headerlink" href="#installation" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://www.dartlang.org/install">Install Dart | Dart</a><ul>
<li>
<p>Although DartPad is a great way to learn how to write a simple app, once you’re ready to develop REAL apps, you need an SDK. Install the SDK for your platform.</p>
<p>To develop xxx apps, get the Dart SDK. 唯獨 mobile 比較特別稱做 Flutter SDK，其他 web/command-line/server-side apps 都稱做 Dart SDK，雖然 web 與 command-line/server-side 的 SDK 並不相同。</p>
</li>
</ul>
</li>
</ul>
<h3 id="mac">Mac<a class="headerlink" href="#mac" title="Permanent link"> #</a></h3>
<p>用 Homebrew 從 <a href="https://github.com/dart-lang/homebrew-dart"><code>dart-lang/dart</code></a> 安裝 <code>dart</code> 套件：</p>
<pre><code>$ brew tap dart-lang/dart
$ brew install dart
</code></pre>

<hr />
<p>參考資料：</p>
<ul>
<li>
<p><a href="https://www.dartlang.org/tools/sdk#tab-sdk-install-mac">Mac - Dart SDK | Dart</a></p>
<ul>
<li>
<p>Install homebrew, and then run:</p>
<pre><code>$ brew tap dart-lang/dart
$ brew install dart
</code></pre>
<p><code>dart</code> 套件的內容：</p>
<pre><code>$ brew info dart
dart-lang/dart/dart: stable 2.1.0, devel 2.1.1-dev.3.2
The Dart SDK
https://www.dartlang.org/
Not installed
From: https://github.com/dart-lang/homebrew-dart/blob/master/dart.rb
==&gt; Options
--devel
    Install development version 2.1.1-dev.3.2
==&gt; Caveats
Please note the path to the Dart SDK:
  /usr/local/opt/dart/libexec
</code></pre>
</li>
<li>
<p>To upgrade when a new release of Dart is available run:</p>
<pre><code>$ brew upgrade dart
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="linux">Linux<a class="headerlink" href="#linux" title="Permanent link"> #</a></h3>
<pre><code>$ vagrant init ubuntu/bionic64
$ vagrant up
$ vagrant ssh

vagrant$ curl -O https://storage.googleapis.com/dart-archive/channels/stable/release/latest/linux_packages/dart_2.1.0-1_amd64.deb
vagrant$ sudo dpkg -i dart_2.1.0-1_amd64.deb
Selecting previously unselected package dart.
(Reading database ... 59746 files and directories currently installed.)
Preparing to unpack dart_2.1.0-1_amd64.deb ...
Unpacking dart (2.1.0-1) ...
Setting up dart (2.1.0-1) ...

vagrant$ which dart
/usr/bin/dart

vagrant$ which pub # not found?
vagrant$ ls -l /usr/bin | grep dart
lrwxrwxrwx 1 root   root          20 Nov 13 18:25 dart -&gt; ../lib/dart/bin/dart

vagrant$ export PATH=$PATH:/usr/lib/dart/bin
vagrant$ which pub
/usr/lib/dart/bin/pub
</code></pre>

<hr />
<p>參考資料：</p>
<ul>
<li>
<p><a href="https://www.dartlang.org/tools/sdk#tab-sdk-install-mac">Linux - Dart SDK | Dart</a></p>
<ul>
<li>If you’re using Debian/Ubuntu on AMD64 (64-bit Intel), you can choose one of the following options, both of which can update the SDK automatically when new versions are released.</li>
</ul>
<p>Install a Debian package</p>
<ul>
<li>Alternatively, download Dart SDK as Debian package in the <code>.deb</code> package format.</li>
<li>
<p>After installing the SDK, add its <code>bin</code> directory to your <code>PATH</code>. For example, use the following command to change <code>PATH</code> in your active terminal session: <code>$ export PATH="$PATH:/usr/lib/dart/bin"</code></p>
<p>因為 <code>/usr/bin</code> 下只有 <code>dart</code>，連常用的 <code>pub</code> 都沒有。</p>
</li>
</ul>
</li>
</ul>
<h3 id="docker">Docker<a class="headerlink" href="#docker" title="Permanent link"> #</a></h3>
<pre><code>$ docker run --rm -it google/dart:2.1.0 dart --version
Dart VM version: 2.1.0 (Unknown timestamp) on &quot;linux_x64&quot;
</code></pre>

<hr />
<p>參考資料：</p>
<ul>
<li>
<p><a href="https://hub.docker.com/r/google/dart/">google/dart - Docker Hub</a></p>
<ul>
<li>
<p><code>google/dart</code> is a docker base image that bundles the latest version of the Dart SDK installed from dartlang.org. It serves as a base for the <a href="https://hub.docker.com/r/google/dart-runtime"><code>google/dart-runtime</code></a> image.</p>
</li>
<li>
<p>If you have an APPLICATION DIRECTORY with a <code>pubspec.yaml</code> file and the main aplication entry point in <code>main.dart</code> you can create a <code>Dockerfile</code> in the application directory with the following content:</p>
<pre><code>FROM google/dart

WORKDIR /app

ADD pubspec.* /app/
RUN pub get
ADD . /app
RUN pub get --offline

CMD []
ENTRYPOINT ["/usr/bin/dart", "main.dart"]
</code></pre>
</li>
<li>
<p>However, if you application directory has a layout like this and potentially is exposing a server at port 8080 you should consider using the base image <code>google/dart-runtime</code> instead. 即 server-side Dart 的應用。</p>
<p>呼應 <code>google/dart-runtime</code> 的說法 &ndash; <code>google/dart-runtime</code> is a docker base image that makes it easy to DOCKERIZE A STANDARD DART APPLICATION.</p>
</li>
</ul>
</li>
<li>
<p><code>google/dart</code> 沒有設定 <code>ENTRYPOINT</code>，只有 <code>CMD</code>：</p>
<pre><code>$ docker inspect google/dart:2.1.0 | jq '.[0]["Config"]["Entryoint"]'
null

$ docker inspect google/dart:2.1.0 | jq '.[0]["Config"]["Cmd"]'
[
  "/bin/sh",
  "-c",
  "/bin/bash"
]
</code></pre>
</li>
</ul>
<h2 id="reference">參考資料<a class="headerlink" href="#reference" title="Permanent link"> #</a></h2>
<ul>
<li><a href="https://www.dartlang.org/">Dart programming language</a></li>
<li><a href="https://github.com/dart-lang">Dart - GitHub</a></li>
<li><a href="https://pub.dartlang.org/">Dart Packages</a></li>
</ul>
<p>社群：</p>
<ul>
<li><a href="https://twitter.com/dart_lang">Google&rsquo;s Dart Team (@dart_lang) | Twitter</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/dart">&lsquo;dart&rsquo; Questions - Stack Overflow</a></li>
</ul>
<p>學習資源：</p>
<ul>
<li><a href="https://news.dartlang.org/">Dart News &amp; Updates</a></li>
</ul>
<p>工具：</p>
<ul>
<li><a href="https://dartpad.dartlang.org/">DartPad</a></li>
<li><a href="../dart-observatory/">Observatory</a></li>
</ul>
<p>更多：</p>
<ul>
<li><a href="../dart-programming/">Programming</a></li>
<li><a href="../dart-package/">Package</a></li>
<li><a href="../dart-testing/">Testing</a></li>
<li><a href="../dart-library/">Library</a></li>
</ul>
<p>相關：</p>
<ul>
<li>Dart 在 mobile 上的方案就是 <a href="../flutter/">Flutter</a>。</li>
</ul>
<p>手冊：</p>
<ul>
<li><a href="https://api.dartlang.org/stable/">Dart API Docs</a></li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <!-- <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script> -->
    <script src="../js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
